{% extends 'posts/base.html' %}
{% block content %}
    {% if user.is_authenticated %}
        {% if posts %}
            {% for post in posts %}
                <div class="post">
                    <p>
                        <strong>
                            <a href="{% url 'profile' post.user.username %}">@{{ post.user.username }}</a>
                        </strong>
                        â€” {{ post.created_at|date:"SHORT_DATETIME_FORMAT" }}
                    </p>
                    <p>{{ post.content }}</p>

                    {% if user == post.user %}
                        <form method="post" action="{% url 'delete_post' post.id %}" style="display: inline;">
                            {% csrf_token %}
                            <button type="submit" style="color: red; border: none; background: none; cursor: pointer;">
                                Delete
                            </button>
                        </form>
                    {% endif %}
                </div>
                <hr>
            {% endfor %}
        {% else %}
            <p>No posts yet. Be the first to post!</p>
        {% endif %}
    {% else %}
        <p>Please <a href="{% url 'login' %}">log in</a> to see posts.</p>
    {% endif %}
{% endblock %}
